(()=>{"use strict";let t=null;function e(e){t?t.originalInput=e:(t=function(t){const e=document.createElement("script");e.src="https://cdn.tailwindcss.com",document.head.appendChild(e);const n=document.createElement("div");n.style.cssText="\n\t\tposition: absolute;\n\t\tz-index: 9999;\n\t\tbackground: white;\n\t\tborder: 1px solid #ccc;\n\t\tpadding: 10px;\n\t\tbox-shadow: 0 2px 5px rgba(0,0,0,0.2);\n\t\tdisplay: none;\n\t\tborder-radius: 4px;\n\t",n.className="bg-white dark:bg-gray-800 w-[300px]",n.setAttribute("data-current-input",t.value);const o=document.createElement("input");o.type="text",o.placeholder="Enter prompt for autocomplete...",o.style.cssText="\n\t\twidth: 100%;\n\t\tpadding: 5px;\n\t\tmargin-top: 5px;\n\t\tbox-sizing: border-box;\n\t";const i=document.createElement("div");i.className="flex justify-end items-center mt-2";const a=document.createElement("select");a.innerHTML='\n\t\t<option value="claude-3.5">Claude 3.5</option>\n\t\t<option value="gpt-4">GPT-4</option>\n\t\t<option value="gpt-3.5-turbo">GPT-3.5</option>\n\t',a.style.padding="5px";const r=document.createElement("button");r.textContent="Submit",r.className="\n\t\tpx-3 py-2\n\t\tbg-gray-100 dark:bg-gray-700\n\t\tborder border-gray-300 dark:border-gray-600\n\t\trounded\n\t\ttext-gray-800 dark:text-gray-200\n\t\ttext-sm\n\t\tcursor-pointer\n\t\tml-2\n\t\ttransition-colors duration-200 ease-in-out\n\t\thover:bg-gray-200 dark:hover:bg-gray-600\n\t",i.appendChild(a),i.appendChild(r);const s=document.createElement("a");return s.textContent="Open Settings â†— ",s.href=chrome.runtime.getURL("options.html"),s.id="go-to-options",s.className="\n\t\tblock\n\t\tmt-2\n\t\ttext-xs\n\t\ttext-blue-600 dark:text-blue-400\n\t\tno-underline\n\t\tcursor-pointer\n\t\ttransition-all duration-200 ease-in-out\n\t\thover:underline\n\t",n.appendChild(o),n.appendChild(i),n.appendChild(s),n.input=o,n.modelSelect=a,n.submitButton=r,n.settingsLink=s,n.originalInput=t,n}(e),document.body.appendChild(t),function(t){async function e(){const e=`${t.input.value}. CURRENT_INPUT_VALUE: ${t.getAttribute("data-current-input")}`,o=t.modelSelect.value,i=await async function(t,e){return new Promise((n=>{chrome.runtime.sendMessage({action:"getCompletion",prompt:t,model:e},(t=>{console.log("REspoinse is",t),n(t.completion)}))}))}(e,o);t.originalInput.value=i,n()}t.submitButton.addEventListener("click",e),t.input.addEventListener("keydown",(t=>{"Enter"===t.key?(t.preventDefault(),e()):"Escape"===t.key&&(t.preventDefault(),n())})),t.settingsLink.addEventListener("click",(t=>{t.preventDefault(),chrome.runtime.sendMessage({action:"openSettingsPage"})}))}(t)),function(t){const e=t.originalInput.getBoundingClientRect();t.style.left=`${e.left+window.scrollX}px`,t.style.top=e.bottom+window.scrollY+5-t.offsetHeight+"px"}(t),t.style.display="block",t.input.focus()}function n(){t&&(t.style.display="none",t.originalInput.focus())}function o(t){"k"===t.key&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e(t.target))}document.addEventListener("focusin",(t=>{const e=t.target;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||e.addEventListener("keydown",o)})),document.addEventListener("focusout",(t=>{const e=t.target;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||e.removeEventListener("keydown",o)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&t&&(e.preventDefault(),n())})),document.addEventListener("click",(e=>{t&&!t.contains(e.target)&&e.target!==t.originalInput&&n()})),chrome.runtime.onMessage.addListener(((t,n,o)=>{if("activateAutocomplete"===t.action){const t=document.activeElement;(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&e(t)}}))})();